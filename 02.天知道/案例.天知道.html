<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta http-equiv="X-UA-Compatible" content="ie=edge" />
    <title>天知道</title>
    <link rel="stylesheet" href="css/reset.css" />
    <link rel="stylesheet" href="css/iconfont.css" />
    <link rel="stylesheet" href="css/main2.css" />
    <style>
        .tem .iconfont {
            font-size: 50px;
        }

        .list-item {
            display: inline-block;
            margin-right: 10px;
        }

        .list-enter-active,
        .list-leave-active {
            transition: all 1s;
        }

        .list-enter,
        .list-leave-to

        /* .list-leave-active for below version 2.1.8 */
            {
            opacity: 0;
            transform: translateY(30px);
        }
    </style>
</head>

<body>
    <div class="wrap" id="app">
        <div class="search_form">
            <div class="logo"><img src="img/logo.png" alt="logo" /></div>
            <div class="form_group">
                <input type="text" class="input_txt" placeholder="请输入查询的天气" v-model.trim="city"
                    @keyup.enter='searchWeather' />
                <button class="input_sub " :class=' {loading:isShow} ' @click='searchWeather'>搜 索</button>
            </div>
            <div class="hotkey">
                <a href="javascript:;" @click='searchWeather();city="北京"'>北京</a>
                <a href="javascript:;" @click='searchWeather();city="上海"'>上海</a>
                <a href="javascript:;" @click='searchWeather();city="广州"'>广州</a>
                <a href="javascript:;" @click='searchWeather();city="深圳"'>深圳</a>
            </div>
        </div>
        <ul class="weather_list">
            <transition-group name='list' tag="ul" v-on:after-enter="afterEnter">
                <li v-for='(item,index) in weatherList' :key='index' :style="{transitionDelay:index*100+'ms'}">
                    <div class="info_type">
                        <!-- 雨 -->
                        <span v-if='item.type.indexOf("雨") != -1' class="iconfont">&#xe931;</span>
                        <!-- 晴 -->
                        <span v-if='item.type.indexOf("晴") != -1' class="iconfont">&#xe933;</span>
                        <!-- 阴 -->
                        <span v-if='item.type.indexOf("阴") != -1' class="iconfont">&#xe92d;</span>
                        <!-- 雪 -->
                        <span v-if='item.type.indexOf("雪") != -1' class="iconfont">&#xeb87;</span>
                        <!-- 云 -->
                        <span v-if='item.type.indexOf("云") != -1' class="iconfont">&#xeb79;</span>
                        <!-- 雷 -->
                        <span v-if='item.type.indexOf("雷") != -1' class="iconfont">&#xeb77;</span>
                        <!-- 雹 -->
                        <span v-if='item.type.indexOf("雹") != -1' class="iconfont">&#xeb76;</span>
                        <!-- 雾 -->
                        <span v-if='item.type.indexOf("雾") != -1' class="iconfont">&#xeb75;</span>
                    </div>
                    <div class="info_temp">高 <b>{{item.high.split(' ')[1]}}</b><br />{{item.low}}</div>
                    <div class="info_date"><b>{{city}}</b><span>{{item.date}}</span></div>
                </li>
            </transition-group>
            <!-- <li>
                <div class="info_type">
                    <span class="iconfont">&#xe932;</span>
                </div>
                <div class="info_temp">高 <b>32℃</b><br />低 32℃</div>
                <div class="info_date"><b>深圳</b><span>5月19日</span></div>
            </li>
            <li>
                <div class="info_type">
                    <span class="iconfont">&#xe932;</span>
                </div>
                <div class="info_temp">高 <b>32℃</b><br />低 32℃</div>
                <div class="info_date"><b>深圳</b><span>5月19日</span></div>
            </li> -->
        </ul>
        <!-- 下面是模板 -->
        <div class="tem">
            <h2>模板</h2>
            <!-- 雨 -->
            <span class="iconfont">&#xe931;</span>
            <!-- 晴 -->
            <span class="iconfont">&#xe933;</span>
            <!-- 阴 -->
            <span class="iconfont">&#xe92d;</span>
            <!-- 雪 -->
            <span class="iconfont">&#xeb87;</span>
            <!-- 云 -->
            <span class="iconfont">&#xeb79;</span>
            <!-- 雷 -->
            <span class="iconfont">&#xeb77;</span>
            <!-- 雹 -->
            <span class="iconfont">&#xeb76;</span>
            <!-- 雾 -->
            <span class="iconfont">&#xeb75;</span>
        </div>
    </div>
    <!-- 开发环境版本，包含了有帮助的命令行警告 -->
    <script src="https://cdn.jsdelivr.net/npm/vue/dist/vue.js"></script>
    <script src="https://cdn.bootcss.com/axios/0.19.0/axios.min.js"></script>
    <script>
        const vm = new Vue({
            el: '#app',
            data: {
                city: '',
                isShow: false,
                weatherList: []
            },
            methods: {
                searchWeather() {
                    this.isShow = true
                    axios.get(`http://wthrcdn.etouch.cn/weather_mini?city=${this.city}`)
                        .then((backData) => {
                            setTimeout(() => {
                                // console.log(backData);
                                this.weatherList = backData.data.data.forecast
                                this.isShow = false
                            }, 2000)
                        })
                },
                // 动画钩子(回调函数)
                afterEnter(el) {
                    console.log('执行啦')
                    // console.log(el)
                    // 不在延迟
                    // transition-delay
                    el.style.transitionDelay = '0ms'
                }
            }
        })



    </script>
</body>

</html>